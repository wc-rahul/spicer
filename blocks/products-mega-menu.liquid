{% comment %}
  Promo Card Block - generated from Figma selection
{% endcomment %}
{% if block.settings.promo1_product != blank or block.settings.promo2_product != blank  or block.settings.promo1_image != blank or block.settings.promo2_image != blank %}
    <div class="promo-card-block-{{ block.id }}">
      {%- assign promo1_product = block.settings.promo1_product -%}
      {%- assign promo2_product = block.settings.promo2_product -%}
      {% if promo1_product != blank or block.settings.promo1_image != blank %}

        {% content_for 'block', type: 'product-card', id: 'static-product-card', product: promo1_product %}
        {% comment %} <a class="promo-card-{{ block.id }}" style="background: {{ block.settings.promo1_bg }};" href="{% if promo1_product != blank %}{{ all_products[promo1_product].url }}{% else %}{{ block.settings.promo1_link }}{% endif %}">
          {% if promo1_product != blank and all_products[promo1_product] and all_products[promo1_product].featured_image != blank %}
            <div class="promo-card__image" style="background-image: url('{{ all_products[promo1_product].featured_image | image_url: width: 600 }}');"></div>
          {% elsif block.settings.promo1_image != blank %}
            <div class="promo-card__image" style="background-image: url('{{ block.settings.promo1_image | image_url: width: 600 }}');"></div>
          {% endif %}
          <div class="promo-card__content">
            <h3 class="promo-card__category">{% if promo1_product != blank and all_products[promo1_product] %}{{ all_products[promo1_product].title }}{% else %}{{ block.settings.promo1_label }}{% endif %}</h3>
          </div>
        </a> {% endcomment %}
      {% endif %}
      {% if promo2_product != blank or block.settings.promo2_image != blank %}
        <a class="promo-card-{{ block.id }}" style="background: {{ block.settings.promo2_bg }};" href="{% if promo2_product != blank %}{{ all_products[promo2_product].url }}{% else %}{{ block.settings.promo2_link }}{% endif %}">
          {% if promo2_product != blank and all_products[promo2_product] and all_products[promo2_product].featured_image != blank %}
            <div class="promo-card__image" style="background-image: url('{{ all_products[promo2_product].featured_image | image_url: width: 600 }}');"></div>
          {% elsif block.settings.promo2_image != blank %}
            <div class="promo-card__image" style="background-image: url('{{ block.settings.promo2_image | image_url: width: 600 }}');"></div>
          {% endif %}
          <div class="promo-card__content">
            <h3 class="promo-card__category">{% if promo2_product != blank and all_products[promo2_product] %}{{ all_products[promo2_product].title }}{% else %}{{ block.settings.promo2_label }}{% endif %}</h3>
          </div>
        </a>
      {% endif %}
    </div>
{% endif %}
 
{% if menu_vertical_navigation %}
    <style>
      .promo-card-block-{{ block.id }}  {
          grid-template-columns: repeat(1, minmax(0, 300px)) !important;
      }
    </style>
{% endif %}
    <style>
    #shopify-block-{{ block.id }} {
      grid-column: span {{block.settings.promo_card_width}};
    }
    .promo-card-block-{{ block.id }} {
        display: flex !important;
        align-items: center;
        justify-content: flex-start;
        gap: 20px;
        grid-template-columns: repeat(var(--menu-content-columns-desktop), minmax(0, 300px));
        grid-column: 1 / -1; /* Makes promo-block span all columns */
        display: grid;
        gap: 10px;
        flex-grow: 1;
      
    }
    .promo-card-{{ block.id }} {
      background: #f7f7f3;
      border-radius: {{ block.settings.promo_card_border_radius | default: 20 }}px;
      padding: {{ block.settings.promo_card_padding | default: 15 }}px; 
      max-width: 350px;
      max-height: 98%;
      min-height: 98%;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      box-sizing: border-box;
      position: relative;
      grid-column: span 1;
      flex-grow: 1;
    }
    .promo-card-{{ block.id }} .promo-card__image {
      width: 100%;
      {% case block.settings.promo_card_image_aspect_ratio %}
      {% when "1/1" %}
        aspect-ratio: 1 / 1;
      
      {% when "4/5" %}
        aspect-ratio: 4 / 5;
        
      {% endcase %}
      background-size: {{ block.settings.promo_card_image_background_size | default: 'cover' }};
      background-repeat: no-repeat;
      background-position: center;
      border-radius: {{ block.settings.promo_card_image_border_radius | default: 20 }}px;
      margin-bottom: 25px;
    }
    .promo-card-{{ block.id }} .promo-card__content {
      width: 100%;
    }
    .promo-card-{{ block.id }} .promo-card__category {
      font-family: 'Poppins', sans-serif;
      font-size: 18px;
      font-weight: 500;
      color: #686c58;
      margin: 0;
      line-height: 1.3;
      text-wrap: balance;
    }
    [slot="overflow"] #shopify-block-{{ block.id }} {
     display: none;
    }
    </style>
    
    
    
    {% schema %}
    {
      "name": "Promo Cards Products",
      "settings": [
        {
          "type": "header",
          "content": "Promo Card"
        },
        {
          "type": "select",
          "id": "promo_card_width",
          "label": "Block width",
          "options": [
            { "value": "1", "label": " 1 column" },
            { "value": "2", "label": "2 columns" },
            { "value": "3", "label": "3 columns" },
            { "value": "4", "label": "4 columns" },
            { "value": "5", "label": "5 columns" }
          ],
          "default": "1"
        },
        {
          "type": "product",
          "id": "promo1_product",
          "label": "Product"
        },
        {
          "type": "image_picker",
          "id": "promo1_image",
          "label": "Image (if not using product)"
        },
        {
          "type": "text",
          "id": "promo1_label",
          "label": "Image Label (if not using product)"
        },
        {
          "type": "url",
          "id": "promo1_link",
          "label": "Image(if not using product)"
        },
        {
          "type": "color",
          "id": "promo1_bg",
          "label": "Promo Card Background Color",
          "default": "#f7f7f3"
        },
        {
          "type": "header",
          "content": "Promo Card"
        },
        {
          "type": "product",
          "id": "promo2_product",
          "label": "Product"
        },
        {
          "type": "image_picker",
          "id": "promo2_image",
          "label": "Image (if not using product)"
        },
        {
          "type": "text",
          "id": "promo2_label",
          "label": "Image label (if not using product)"
        },
        {
          "type": "url",
          "id": "promo2_link",
          "label": "Image link (if not using product)"
        },
        {
          "type": "color",
          "id": "promo2_bg",
          "label": "Promo Card Background Color",
          "default": "#f7f7f3"
        },
        {
          "type": "header",
          "content": "General Settings"
        },
        {
          "type": "range",
          "id": "promo_card_border_radius",
          "label": "Promo card border radius",
          "min": 0,
          "max": 40,
          "step": 1,
          "unit": "px",
          "default": 20
        },
        {
          "type": "range",
          "id": "promo_card_image_border_radius",
          "label": "Promo card image border radius",
          "min": 0,
          "max": 40,
          "step": 1,
          "unit": "px",
          "default": 20
        },
        {
          "type": "range",
          "id": "promo_card_padding",
          "label": "Promo card padding",
          "min": 0,
          "max": 40,
          "step": 1,
          "unit": "px",
          "default": 15
        },
        {
          "type": "select",
          "id": "promo_card_image_aspect_ratio",
          "label": "Promo card image aspect ratio",
          "options": [
            { "value": "1/1", "label": "Square (1:1)" },
            { "value": "4/5", "label": "Portrait (4:5)" }
          ],
          "default": "4/5"
        },
        {
          "type": "select",
          "id": "promo_card_image_background_size",
          "label": "Promo card image background size",
          "options": [
            { "value": "cover", "label": "Cover" },
            { "value": "contain", "label": "Contain" }
          ],
          "default": "cover"
        }
      ],
     
    }
    {% endschema %}
    