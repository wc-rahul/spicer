<style>
  @media only screen and (min-width: 750px){
    #shopify-section-{{ section.id }} .section-header {
      margin-bottom: 40px;
    }
  }
  
  #shopify-section-{{ section.id }} {
    background-color: #F7F7F7;
  }
  .section-product-template+.shopify-section {
    margin-top: 0;
  }
  #shopify-section-{{ section.id }} .section-header.text-center h2{
    text-align: left;
  }
  #shopify-section-{{ section.id }} .product-item-block{
    border-radius: 16px;
    background: var(--text-action-primary, #FFF);
    box-shadow: 0px 4px 20px 0px rgba(0, 0, 0, 0.05);
    width: 24.4% !important;
    margin-left: 6px !important;

  }
  /* .template-product .grid__item {
    margin-left: 6px !important;
  } */
  .view-mode-grid .color-swatch-list.list-view{
    display: none;
  }
  .view-mode-list .color-swatch-list.grid-view{
    display: none;
  }
  .product-recommendations__inner.half_row_mobile {
    padding-bottom: 50px;
  }
  @media (max-width:749px){
    #shopify-section-{{ section.id }} .product-item-block {
      width: 48.2% !important;
    }
  }
</style>

<style>
  span.h4.item__title.product-card__title {
    color: var(--text-primary, #362323);
    font-family: Foundry Sterling;
    font-size: 14px;
    font-style: normal;
    font-weight: 500;
    line-height: 180%;
    letter-spacing: 0.07px;
  }
  .product-card-short-desc {
    color: var(--text-primary, #362323);
    font-feature-settings: 'clig' off, 'liga' off;
    font-family: Foundry Sterling;
    font-size: 12px;
    font-style: normal;
    font-weight: 500;
    line-height: 120%;
    margin: 7px 0 0 0;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;  
    overflow: hidden;
    min-height: 28px;
  }
  a.add-to-wsl {
    width: 100%;
    display: block;
    text-align: center;
    margin: 16px 0 0 0;
    text-decoration: underline;
  }
  .product-form__cart-submit {
    min-height: 44px;
    padding: 9px 20px 10px 23px;
    font-size: 14px;
  }
  .product-item__swatches .color-swatch__item:after{
    display: none;
  }
  .product-item__swatches .color-swatch__item {
    position: relative;
    display: block;
    width: 22px;
    height: 22px;
    cursor: pointer;
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
    border-radius: 50%;
  }
  .product-item__swatches .color-swatch {
    margin: 4px;
  }
  .product-item__swatches .color-swatch__item-link {
    position: relative;
    padding-left: 4px;
    padding-right: 8px;
    height: 18px;
    box-shadow: unset;
    font-size: 14px;
    margin: 2px 0 0 0;
  }
  .product-item__swatches {
    position: absolute;
    display: flex;
    right: 2px;
    top: 20px;
  }
  .product-label--on-sale {
    border-color: var(--product_label_sale_color);
    color: white;
    background-color: var(--product_label_sale_color);
  }
  .product-label {
    padding: 7px 11px;
    border-radius: 5px;
    font-size: 14px;
    border: unset;
    min-width: unset;
    font-weight: 700;
  }
  .product-item__label-list {
    position: absolute;
    z-index: 1;
    top: 15px;
    left: 15px;
  }
  .product-card {
    border-radius: 16px;
  }
  a.color-swatch:after {
    position: absolute;
    top: 0;
    width: 100%;
    height: 100%;
    content: "";
  }
  
  .product-item__swatches  .color-swatch__item-link.active-9{
    display: block !important;
  }
  .collection-sidebar {
    margin-right: 45px;
    padding: 0px 25px 20px 0;
  }
  .search-sidebar_form {
    display: none;
  }

  @media(max-width: 749px){
    span.h4.item__title.product-card__title {
      font-size: 16px;
      font-weight: 700;
    }
    .product-card-short-desc {
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;  
      overflow: hidden;
      min-height: 29px;
    }
    .product-form__cart-submit {
      font-size: 14px;
    }
  }
  /* .product-item__swatches .color-swatch__item-link.active-9 {
    display: block;
  } */
</style>

{%- assign max_height = 250 -%}
{%- assign grid_item_width = ' medium-up--one-quarter' -%}




{%- if section.settings.show_product_recommendations -%}
{%- if recommendations.performed -%}
    {%- if recommendations.products_count > 0 -%}


      {%  if recommendations.intent == 'related'  %}
    {% assign products_per_row_mobile = section.settings.grid_mobile | times: 1 %}
    
    {% assign grid_item_mobile_width = 'small--one-whole' %}
    {% if products_per_row_mobile  == 2 %}
    {% assign grid_item_mobile_width = 'small--one-half' %}
    {% endif %}

      <div class=" product-recommendations__inner {% if products_per_row_mobile == 2 %} half_row_mobile {% endif %}">
        {%- if section.settings.heading != blank -%}
          <div class="section-header text-center">
            <h2>{{ section.settings.heading | escape }}</h2>
          </div>
        {%- endif -%}
        <div class="zoom-fade-animation grid grid--uniform grid--view-items {% if settings.align_height %} use_align_height {% else %} use_image_height {% endif %}">
           
          {%- assign products_per_row = 4 -%}
          
          {%- for product in recommendations.products -%}
              {%- if product.tags contains 'child' -%}
                  {%- assign products_per_row = 5 -%}
                  {%- break -%}
              {%- endif -%}
          {%- endfor -%}    
 
          {%- for product in recommendations.products -%}
             {% unless product.tags contains 'child' %}
                 
                {% include 'product-card-item', list: false, max_height: max_height, product: product, show_vendor: section.settings.show_vendor, products_per_row: products_per_row %}  
             {% endunless %}      
          {%- endfor -%}
        </div>
      </div>

        {%  elsif   recommendations.intent == 'complementary' %}

         <div class="grid grid--uniform grid--view-items complementary_grid">
      {%- for product in recommendations.products -%}
           {% unless product.tags contains 'child' %}
              {% include 'product-card-item', isComplementary_product: true, list: true, max_height: max_height, product: product, show_vendor: false, products_per_row: 1 %}
           {% endunless %}   
      {%  endfor %}
         </div>

        {%  endif %}
      {%  endif %}
  {%- else  -%}

{% assign products_per_row_mobile = section.settings.grid_mobile | times: 1 %}

{% assign grid_item_mobile_width = 'small--one-whole' %}
{% if products_per_row_mobile  == 2 %}
{% assign grid_item_mobile_width = 'small--one-half' %}
{% endif %}

    <div class="page-width zoom-fade-animation {% if products_per_row_mobile == 2 %} half_row_mobile {% endif %}" data-base-url="{{ routes.product_recommendations_url }}" data-product-id="{{ product.id }}" data-section-id="{{ section.id }}" data-section-type="product-recommendations"></div>
  {%- endif -%}
{%- endif -%}

{% schema %}
{
  "name": "t:sections.product-recommendations.name",
  "settings": [
    {
      "type": "checkbox",
      "id": "show_product_recommendations",
      "label": "t:sections.product-recommendations.settings.show_product_recommendations.label",
      "info": "t:sections.product-recommendations.settings.show_product_recommendations.info",
      "default": true
    },
 {
      "type": "select",
      "id": "grid_mobile",
      "label": "t:sections.product-recommendations.settings.grid_mobile.label",
	"options": [
		{
          "value": "1",
          "label": "t:sections.product-recommendations.settings.grid_mobile.options__1.label"
		},
		{
          "value": "2",
          "label": "t:sections.product-recommendations.settings.grid_mobile.options__2.label"
		}
	],
	"default":"1"
	},
    {
      "type": "text",
      "id": "heading",
      "label": "t:sections.product-recommendations.settings.heading.label",
      "default": {
        "cs": "Mohlo by se vám také líbit",
        "da": "Du vil muligvis også synes om",
        "de": "Das könnte dir auch gefallen",
        "en": "You may also like",
        "es": "También te puede interesar",
        "fi": "Saatat pitää myös näistä",
        "fr": "Vous pourriez aimer également",
        "it": "Potrebbero interessarti anche",
        "ja": "あなたへのおすすめ",
        "ko": "회원님도 좋아할 것입니다.",
        "nb": "Kanskje du også liker",
        "nl": "Wellicht vind je dit ook leuk",
        "pl": "Może Ci się spodobać również",
        "pt-BR": "Talvez você também goste de",
        "pt-PT": "Também poderá gostar de",
        "sv": "Du kanske också gillar",
        "th": "คุณอาจจะชอบ",
        "tr": "Şunlar da hoşunuza gidebilir:",
        "vi": "Có thể bạn cũng thích",
        "zh-CN": "您可能还喜欢",
        "zh-TW": "您也可能喜歡"
      }
    },
    {
      "type": "checkbox",
      "id": "show_vendor",
      "label": "t:sections.product-recommendations.settings.show_vendor.label",
      "default": false
    }
  ]
}
{% endschema %}
