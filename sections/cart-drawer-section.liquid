{% comment %}
  This is the cart drawer component.
{% endcomment %}
{% if settings.cart_type == 'drawer' and template.name != 'cart' %}
    <script
        src="{{ 'cart-drawer.js' | asset_url }}"
        type="module"
    ></script>
    
    <cart-drawer-component
        class="cart-drawer"
        {{ block.shopify_attributes }}
        {{ cart_drawer_sizes }}
        {% if settings.auto_open_cart_drawer %}
        auto-open
        {% endif %}
    >
        <button
        class="button header-actions__action button-unstyled"
        on:click="/open"
        style="visibility: hidden; height: 0px; width: 0px;"
        aria-label="{{ 'accessibility.open_cart_drawer' | t }} {{ 'accessibility.cart_count' | t}}: {{ cart.item_count }}"
        >
        {% render 'cart-icon-component' %}
        </button>
    
        <dialog
        ref="dialog"
        class="cart-drawer__dialog dialog-modal dialog-drawer color-{{ settings.drawer_color_scheme }}{% if cart.empty? %} cart-drawer--empty{%endif%}"
        scroll-lock
        >
        <div class="cart-drawer__inner">
            <cart-items-component
            class="cart-items-component"
            data-section-id="{{ section.id }}"
            >
            
            {% comment %} {%- if cart.empty? -%} {% endcomment %}
                {% comment %} {% for block in section.blocks %}
                
                    {% if block.type == '@theme' and block.id contains 'cart_progress_bar' %} 
                        here inside - {{ block.settings }}
                        {% render 'cart-discounts-bar',   block_settings: block.settings %}
                    {% endif %}
                {% endfor %} {% endcomment %}
                {% comment %} <div class="cart-drawer__header">
                <button
                    ref="closeButton"
                    on:click="cart-drawer-component/close"
                    class="button cart-drawer__close-button button-unstyled"
                    aria-label="{{ 'actions.close_dialog' | t }}"
                >
                    <span class="svg-wrapper">
                    {{- 'icon-close.svg' | inline_asset_content -}}
                    </span>
                </button>
                </div> {% endcomment %}
                {% comment %}
                <div
                class="cart-drawer__content motion-reduce"
                aria-label="{{ 'accessibility.cart' | t }}"
                >
                
                
                <div class="cart-drawer__items">
                    {% render 'cart-products' %}
                </div> 
                </div>

                {% endcomment %}

            {% comment %} {%- else -%} {% endcomment %}
                <div
                class="cart-drawer__header"
                id="cart-drawer-header"
                >
                <span class="cart-drawer__heading h3">
                    {{ 'content.cart_title' | t }}
                    {% render 'cart-bubble' %}
                </span>
    
                <button
                    ref="closeButton"
                    on:click="cart-drawer-component/close"
                    class="button cart-drawer__close-button button-unstyled"
                    aria-label="{{ 'actions.close_dialog' | t }}"
                >
                    <span class="svg-wrapper">
                    {{- 'icon-close.svg' | inline_asset_content -}}
                    </span>
                </button>
                </div>
    
                <div
                class="cart-drawer__content motion-reduce"
                aria-label="{{ 'accessibility.cart' | t }}"
                style="--header-height: {{ section.settings.header_height | default: 60 }}px;"
                >
                {% if cart.empty? %}
                  {% comment %} <div
                   
                    class="cart-items__wrapper" >
                    <span class="cart-drawer__heading h3 cart-drawer__heading--empty">
                        {{ 'content.your_cart_is_empty' | t }}
                    </span>
                    {%- if shop.customer_accounts_enabled and customer == null -%}
                      <p>
                        {{ 'actions.log_in_html' | t: link: routes.account_login_url }}
                      </p>
                    {%- endif -%}
                
                    <a
                      class="button cart-items__empty-button"
                      href="{{ routes.all_products_collection_url }}"
                    >
                      {{ 'actions.continue_shopping' | t }}
                    </a>
                  </div> {% endcomment %}
                  <span class="cart-drawer__heading h3 cart-drawer__heading--empty">
                    {{ 'content.your_cart_is_empty' | t }}
                </span>
                {% endif %}
               
                  {%- content_for 'blocks' -%} 
                
                
                    {% comment %} <scroll-hint
                    class="cart-drawer__items"
                >
                
                    {% render 'cart-products' %}
                
                </scroll-hint> {% endcomment %}
                
                {% comment %} <div class="cart-drawer__summary">
                    {% render 'cart-summary' %}
                </div>  {% endcomment %}
                </div>
            {% comment %} {%- endif -%} {% endcomment %}
            
            </cart-items-component>
        </div>
        </dialog>
    </cart-drawer-component>
  {% endif %}
  {% stylesheet %}
  .cart-drawer--empty .cart-drawer__header{
    justify-content: space-between !important;
  }
  .cart-drawer--empty .cart-drawer__heading{
    margin-bottom: 0px !important;
  }
    .cart-items-component {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
    }
  
    .cart-drawer__heading .cart-bubble {
      width: fit-content;
      border-radius: var(--style-border-radius-buttons-primary);
      aspect-ratio: auto;
      padding: var(--cart-padding);
    }
  
    .cart-drawer__heading .cart-bubble[data-maintain-ratio] {
      aspect-ratio: 1;
      min-width: 26px;
    }
  
    .cart-drawer__header {
      background-color: var(--color-background);
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
      padding: var(--cart-drawer-padding);
      border-bottom: var(--style-border-width) solid none;
      position: sticky;
      top: 0;
      z-index: 1;
  
      @media screen and (width >= 750px) {
        padding: var(--cart-drawer-padding-desktop);
      }
    }
  
    .cart-drawer__dialog {
      overflow: hidden;
    }
  
    .cart-drawer__inner {
      height: 100%;
      overflow: hidden;
    }
  
    .cart-drawer__content {
      height: calc(100% - var(--header-height));
      display: flex;
      flex-direction: column;
    }
  
    .cart-drawer__summary {
      background-color: var(--color-background);
      position: sticky;
      bottom: 0;
      z-index: 1;
    }
  {% endstylesheet %} 
  {% schema %}
  {
    "name": "Cart Drawer",
    "enabled_on": {
        "groups": ["header"]
    },
    "blocks": [
      {
        "type": "@theme"
      },
      {
        "type": "@app"
      }
    ],
    "settings": [], 
    "presets": [
      {
        "name": "Cart Drawer",
        "blocks":{
          "cart-progress-bar": {
            "type": "cart-progress-bar",
            "settings": {}
          },
          "cart-products-drawer":{
            "type": "cart-products-drawer",
            "settings": {
              "gap": 24,
              "image_ratio": "portrait",
              "dividers": true,
              "vendor": false,
              "call_outs": true,
              "cart_callout_recently_added_color": "#5aca75",
              "cart_callout_low_stock_threshold": 3,
              "cart_callout_low_stock_color": "#ff952d",
              "padding-block-start": 10,
              "padding-block-end": 0,
              "padding-inline-start": 0,
              "padding-inline-end": 0
            }
          }
        },
        "block_order": [
          "cart-progress-bar",
          "cart-products-drawer"
        ]
      }
     
    ]
  }
  {% endschema %}